{"version":3,"sources":["webpack://platformer-game/./app/areas/index.js","webpack://platformer-game/./app/controller/audio.js","webpack://platformer-game/./app/controller/index.js","webpack://platformer-game/./app/controller/input.js","webpack://platformer-game/./app/controller/mouse-input.js","webpack://platformer-game/./app/engine/index.js","webpack://platformer-game/./app/game/animator.js","webpack://platformer-game/./app/game/coins.js","webpack://platformer-game/./app/game/collider.js","webpack://platformer-game/./app/game/enemies.js","webpack://platformer-game/./app/game/fireballs.js","webpack://platformer-game/./app/game/index.js","webpack://platformer-game/./app/game/object.js","webpack://platformer-game/./app/game/player.js","webpack://platformer-game/./app/game/portal.js","webpack://platformer-game/./app/game/water.js","webpack://platformer-game/./app/game/world.js","webpack://platformer-game/./app/index.js","webpack://platformer-game/./app/screen/index.js","webpack://platformer-game/./app/screen/tileset.js","webpack://platformer-game/./app/util/index.js","webpack://platformer-game/webpack/bootstrap","webpack://platformer-game/webpack/runtime/define property getters","webpack://platformer-game/webpack/runtime/hasOwnProperty shorthand","webpack://platformer-game/webpack/runtime/make namespace object","webpack://platformer-game/webpack/startup"],"names":["AudioController","this","count","audios","key","ext","volume","audio","Audio","play","error","loaded","filteredAudios","filter","file","length","done","onload","forEach","addEventListener","src","loop","pause","currentTime","value","callback","go","delay","Controller","up","left","right","fire","type","keyCode","down","getInput","Input","active","MouseInput","id","action","actions","holdit","document","getElementById","btn","start","speedup","timeout","clear","clearTimeout","preventDefault","e","repeat","setTimeout","ontouchstart","style","background","ontouchend","console","GameEngine","timeStep","update","render","started","updated","time","extraTime","animationFrameRequest","engineLoop","t","timeStamp","window","requestAnimationFrame","performance","now","cancelAnimationFrame","Animator","frameSet","frameIndex","frameValue","last","items","objects","tileSize","collectedCoins","frameSets","assetCount","loadCount","index","image","Image","k","push","addImage","top","offsetX","offsetY","includes","Coin","coin","splice","indexOf","updateAnimation","x","y","super","baseX","baseY","positionX","Math","random","PI","positionY","animator","cos","sin","animate","Collider","object","tileX","tileY","router","direction","collidePlatformTop","collidePlatformBottom","collidePlatformLeft","collidePlatformRight","flag","keys","split","bottomTile","getTop","getOldTop","setTop","velocityY","leftTile","getRight","getOldRight","setRight","velocityX","rightTile","getLeft","getOldLeft","setLeft","topTile","getBottom","getOldBottom","setBottom","jumping","Enemies","enemies","killedEnemies","reduce","total","onImgLoad","imageLeft","imageRight","sway","Enemy","enemy","changeFrameSet","Fireballs","Fireball","_findIndex","velocity","Game","gameOverCallback","world","over","onGameOver","isLoaded","val","Object","width","height","xOld","yOld","Player","color","running","firing","keyLeft","toLowerCase","keyRight","dead","gravity","friction","absVelocityX","abs","Portal","destinationX","destinationY","destinationArea","Water","waterObjects","WaterObject","World","rows","columns","coins","totalCoins","player","collider","fireballs","audioController","data","theme","playedThemeMusic","load","stopThemeMusic","map","areaMap","isPlayerDead","objectsMap","collisonMap","deathAreas","death","portals","p","water","reset","portal","setCenterX","setCenterY","stop","bottom","_normalizeIndex","floor","collide","maxIndex","object1","object2","isAssetsLoaded","playThemeMusic","collideObject","checkCollision","remove","fireball","j","onPlayerDead","preLoadAndFetch","isTouchesEnabled","documentElement","startBtn","startTitle","startScreen","controllers","querySelectorAll","loadingScreen","progressValue","toggleControllers","controller","visibility","toggleStartScreen","toggleLoadingScreen","setProgressValue","areaId","areaNumber","worldChanged","game","textContent","setupWorld","setup","screen","setupScreen","querySelector","buffer","canvas","resize","clientWidth","clientHeight","engine","loadValue","totalAssets","totalLoaded","round","loadPercent","moveLeft","moveRight","playJumpSound","jump","playFireSound","add","uid","hold","resume","drawBackground","drawMap","drawMapObjects","drawObject","waterItem","xOffset","drawPlayer","scoreTextOffest","drawText","keyDownUp","leftMouse","clearMouse","rightMouse","upMouse","fireMouse","onclick","visibilityState","pauseThemeMusic","Screen","createElement","getContext","context","tileSet","images","drawTile","drawImage","i","row","Array","isArray","fillRect","objectImages","element","yOffset","tileBackground","text","fillStyle","font","fillText","rect","ratio","webkitImageSmoothingEnabled","mozImageSmoothingEnabled","imageSmoothingEnabled","TileSet","worldKey","meta","1","objectLen","tileLen","2","3","4","5","Date","toString","substring","sprites","rel","tiles","body","getElementsByTagName","append","href","as","item","prepend","url","__webpack_module_cache__","__webpack_require__","moduleId","exports","module","__webpack_modules__","d","definition","o","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag"],"mappings":"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","file":"bundle.js","sourcesContent":["import area1 from \"./area-1.json\";\nimport area2 from \"./area-2.json\";\nimport area3 from \"./area-3.json\";\nimport area4 from \"./area-4.json\";\nimport area5 from \"./area-5.json\";\nimport area6 from \"./area-6.json\";\nimport area7 from \"./area-7.json\";\n\nexport default {\n  [area1.id]: area1,\n  [area2.id]: area2,\n  [area3.id]: area3,\n  [area3.id]: area3,\n  [area4.id]: area4,\n  [area5.id]: area5,\n  [area6.id]: area6,\n  [area7.id]: area7,\n};\n","export default class AudioController {\n  constructor() {\n    this.count = 4;\n    this.audios = {};\n  }\n\n  static play(key, ext = \"wav\", volume = 0.4) {\n    const audio = new Audio(`./assets/audio/${key}.${ext}`);\n    audio.volume = volume;\n    audio.play();\n  }\n\n  play(key, ext = \"wav\") {\n    try {\n      if (!this.audios[key]) {\n        this.audios[key] = new Audio(`./assets/audio/${key}.${ext}`);\n      }\n\n      this.audios[key].volume = 0.4;\n      this.audios[key].play();\n    } catch (error) {}\n\n    return this;\n  }\n\n  load(audios = [], loaded) {\n    const filteredAudios = audios.filter(({ file }) => !this.audios[file]);\n\n    if (!filteredAudios.length) {\n      loaded(true);\n      return;\n    }\n\n    loaded(false);\n\n    let done = 0;\n    const onload = () => {\n      done += 1;\n      if (filteredAudios.length === done) {\n        loaded(true);\n      }\n    };\n\n    audios.forEach(({ file, ext = \"mp3\" }) => {\n      this.audios[file] = new Audio();\n      this.audios[file].addEventListener(\"canplaythrough\", onload, false);\n      this.audios[file].src = `./assets/audio/${file}.${ext}`;\n      this.audios[file].volume = 0.5;\n    });\n  }\n\n  loop(key) {\n    if (this.audios[key]) {\n      this.audios[key].loop = true;\n    }\n  }\n\n  pause(key) {\n    if (this.audios[key]) {\n      this.audios[key].pause();\n    }\n  }\n\n  stop(key) {\n    if (this.audios[key]) {\n      this.pause(key);\n      this.audios[key].currentTime = 0;\n    }\n  }\n\n  volume(key, value) {\n    if (this.audios[key]) {\n      this.audios[key].volume = value / 100;\n    }\n  }\n\n  static animate(callback, go = false, delay = 12) {\n    if (go) {\n      this.count++;\n\n      while (this.count > delay) {\n        this.count -= delay;\n        callback();\n      }\n    } else {\n      this.count = 4;\n    }\n  }\n}\n","import Input from \"./input\";\n\nexport default class Controller {\n  constructor() {\n    this.up = new Input();\n    this.left = new Input();\n    this.right = new Input();\n    this.fire = new Input();\n  }\n\n  keyDownUp(type, keyCode) {\n    let down = type == \"keydown\" ? true : false;\n\n    switch (keyCode) {\n      case 37:\n      case 65:\n        this.left.getInput(down);\n        break;\n      case 38:\n      case 32:\n        this.up.getInput(down);\n        break;\n      case 39:\n      case 68:\n        this.right.getInput(down);\n        break;\n      case 13:\n      case 16:\n        this.fire.getInput(down);\n    }\n  }\n}\n","export default class Input {\n  constructor() {\n    this.down = false;\n    this.active = false;\n  }\n\n  getInput(down) {\n    if (this.down != down) this.active = down;\n    this.down = down;\n  }\n}\n","export default class MouseInput {\n  constructor(id, action) {\n    this.actions = this.holdit(document.getElementById(id), action, 1000, 2);\n  }\n\n  holdit(btn, action, start, speedup) {\n    let timeout;\n\n    const clear = () => {\n      clearTimeout(timeout);\n    };\n\n    const preventDefault = (e) => {\n      if (e.preventDefault) {\n        e.preventDefault();\n      }\n    };\n\n    const repeat = function () {\n      action(\"keydown\");\n\n      timeout = setTimeout(repeat, start);\n      start = start / speedup;\n    };\n\n    try {\n      btn.ontouchstart = function (e) {\n        preventDefault(e);\n\n        btn.style.background = \"linear-gradient(145deg, #262d2c, #36413e)\";\n\n        repeat();\n      };\n\n      btn.ontouchend = function (e) {\n        preventDefault(e);\n        action(\"keyup\");\n\n        btn.style.background = \"linear-gradient(145deg, #36413e, #262d2c)\";\n\n        clear();\n      };\n    } catch (error) {\n      console.error(\"Error in mouse input\", error);\n    }\n    return { clear };\n  }\n}\n","export default class GameEngine {\n  constructor(timeStep, update, render) {\n    this.timeStep = timeStep;\n    this.update = update;\n    this.render = render;\n    this.started = false;\n\n    this.pause = false;\n\n    this.updated = false;\n\n    this.time = null;\n    this.extraTime = 0;\n    this.animationFrameRequest = null;\n    this.engineLoop = (t) => this.loop(t);\n  }\n\n  loop(timeStamp) {\n    if (this.pause) {\n      return;\n    }\n\n    this.animationFrameRequest = window.requestAnimationFrame(this.engineLoop);\n\n    this.extraTime += timeStamp - this.time;\n    this.time = timeStamp;\n\n    if (this.extraTime >= this.timeStep * 3) {\n      this.extraTime = this.timeStep;\n    }\n\n    while (this.extraTime >= this.timeStep) {\n      this.extraTime -= this.timeStep;\n\n      this.update(this.timeStamp);\n\n      this.updated = true;\n    }\n\n    if (this.updated) {\n      this.updated = false;\n      this.render(this.timeStamp);\n    }\n  }\n\n  start() {\n    this.started = true;\n    this.extraTime = this.timeStep;\n\n    this.time = window.performance.now();\n    this.animationFrameRequest = window.requestAnimationFrame(this.engineLoop);\n  }\n\n  stop() {\n    window.cancelAnimationFrame(this.animationFrameRequest);\n  }\n\n  hold() {\n    this.pause = true;\n  }\n\n  resume() {\n    this.pause = false;\n  }\n}\n","export default class Animator {\n  constructor(frameSet, delay = 4) {\n    this.count = 0;\n    this.delay = delay >= 1 ? delay : 1;\n    this.frameSet = frameSet;\n    this.frameIndex = 0;\n    this.frameValue = frameSet[0];\n  }\n\n  animate(last) {\n    this.loop(last);\n  }\n\n  changeFrameSet(frameSet, delay = 4, frameIndex = 0) {\n    if (this.frameSet === frameSet) {\n      return;\n    }\n\n    this.count = 0;\n    this.delay = delay;\n    this.frameSet = frameSet;\n    this.frameIndex = frameIndex;\n    this.frameValue = frameSet[frameIndex];\n  }\n\n  loop(last) {\n    this.count++;\n\n    while (this.count > this.delay) {\n      this.count -= this.delay;\n\n      if (last && this.frameIndex === this.frameSet.length - 1) {\n        this.frameIndex = this.frameSet.length - 1;\n      } else {\n        this.frameIndex =\n          this.frameIndex < this.frameSet.length - 1 ? this.frameIndex + 1 : 0;\n      }\n\n      this.frameValue = this.frameSet[this.frameIndex];\n    }\n  }\n}\n","import Object from \"./object\";\nimport Animator from \"./animator\";\nexport default class items {\n  constructor(objects = [], tileSize, collectedCoins) {\n    this.items = [];\n    this.loaded = false;\n\n    const keys = [{ id: \"\", count: 16 }];\n\n    this.frameSets = {};\n\n    this.assetCount = 16;\n    this.loadCount = 0;\n    keys.forEach(({ count }) => {\n      for (let index = 1; index <= count; index++) {\n        const image = new Image();\n        image.onload = (e) => {\n          this.loadCount += 1;\n\n          if (count === this.loadCount) {\n            this.loaded = true;\n          }\n        };\n        image.src = `./assets/sprites/coin/image ${index}.webp`;\n\n        const addImage = (k, image) => {\n          if (!this.frameSets[k]) {\n            this.frameSets[k] = [];\n          }\n          this.frameSets[k].push(image);\n        };\n\n        addImage(\"coin\", image);\n      }\n    });\n\n    for (let index = 0; index < objects.length; index++) {\n      const { id, left, top, offsetX, offsetY } = objects[index];\n\n      if (!collectedCoins.includes(id)) {\n        this.items.push(\n          new Coin(id, left * tileSize, top * tileSize, offsetX, offsetY, this.frameSets[\"coin\"])\n        );\n      }\n    }\n  }\n\n  remove(coin) {\n    this.items.splice(this.items.indexOf(coin), 1);\n  }\n\n  update() {\n    for (let index = 0; index < this.items.length; index++) {\n      this.items[index].update();\n    }\n  }\n\n  updateAnimation() {\n    for (let index = 0; index < this.items.length; index++) {\n      this.items[index].updateAnimation();\n    }\n  }\n}\n\nclass Coin extends Object {\n  constructor(id, x, y, offsetX = 3, offsetY = 3, frameSet) {\n    super(x, y, 8, 10);\n\n    this.id = id;\n    this.offsetX = offsetX;\n    this.offsetY = offsetY;\n\n    this.baseX = x;\n    this.baseY = y;\n    this.positionX = Math.random() * Math.PI * 2;\n    this.positionY = this.positionX * 2;\n\n    this.animator = new Animator(frameSet);\n  }\n\n  update() {\n    this.positionX += 0.1;\n    this.positionY += 0.15;\n\n    this.x = this.baseX + Math.cos(this.positionX) * 1.5;\n    this.y = this.baseY + Math.sin(this.positionY);\n  }\n\n  updateAnimation() {\n    this.animator.animate();\n  }\n}\n","export default class Collider {\n  collide(value, object, tileX, tileY, tileSize) {\n    const router = (direction) => {\n      switch (direction) {\n        case \"t\":\n          return this.collidePlatformTop(object, tileY);\n        case \"b\":\n          return this.collidePlatformBottom(object, tileY + tileSize);\n        case \"l\":\n          return this.collidePlatformLeft(object, tileX);\n        case \"r\":\n          return this.collidePlatformRight(object, tileX + tileSize);\n        default:\n          break;\n      }\n    };\n\n    let flag = false;\n    if (typeof value === \"string\") {\n      const keys = value.split(\"\");\n\n      for (let index = 0; index < keys.length; index++) {\n        flag = router(keys[index]);\n        if (flag) {\n          break;\n        }\n      }\n    }\n\n    return flag;\n  }\n\n  collidePlatformBottom(object, bottomTile) {\n    if (object.getTop() < bottomTile && object.getOldTop() >= bottomTile) {\n      object.setTop(bottomTile);\n      object.velocityY = 0;\n      return true;\n    }\n    return false;\n  }\n\n  collidePlatformLeft(object, leftTile) {\n    if (object.getRight() > leftTile && object.getOldRight() <= leftTile) {\n      object.setRight(leftTile - 0.01);\n      object.velocityX = 0;\n      return true;\n    }\n    return false;\n  }\n\n  collidePlatformRight(object, rightTile) {\n    if (object.getLeft() < rightTile && object.getOldLeft() >= rightTile) {\n      object.setLeft(rightTile);\n      object.velocityX = 0;\n      return true;\n    }\n    return false;\n  }\n\n  collidePlatformTop(object, topTile) {\n    if (object.getBottom() > topTile && object.getOldBottom() <= topTile) {\n      object.setBottom(topTile - 0.01);\n      object.velocityY = 0;\n      object.jumping = false;\n      return true;\n    }\n    return false;\n  }\n}\n","import Object from \"./object\";\nimport Animator from \"./animator\";\n\nexport default class Enemies {\n  constructor(enemies = [], tileSize = 16, killedEnemies = \"\") {\n    this.items = [];\n\n    const keys = [{ id: \"pig\", count: 16 }];\n\n    this.frameSets = {};\n\n    this.loadCount = 0;\n    this.assetCount = keys.reduce((total, { count }) => total + count * 2, 0);\n\n    keys.forEach(({ id, count }) => {\n      for (let index = 1; index <= count; index++) {\n        const onImgLoad = () => {\n          this.loadCount += 1;\n\n          if (this.assetCount === this.loadCount) {\n            this.loaded = true;\n          }\n        };\n        const imageLeft = new Image();\n        const imageRight = new Image();\n        imageLeft.onload = onImgLoad;\n        imageRight.onload = onImgLoad;\n        imageLeft.src = `./assets/sprites/enemies/${id}/left/image_part_0${index}.png`;\n        imageRight.src = `./assets/sprites/enemies/${id}/right/image_part_0${index}.png`;\n\n        const addImage = (k, image) => {\n          if (!this.frameSets[k]) {\n            this.frameSets[k] = [];\n          }\n          this.frameSets[k].push(image);\n        };\n\n        addImage(`${id}Left`, imageLeft);\n        addImage(`${id}Right`, imageRight);\n      }\n    });\n\n    for (let index = 0; index < enemies.length; index++) {\n      const { id, type, left, top, sway } = enemies[index];\n\n      if (!killedEnemies.includes(id)) {\n        this.items.push(\n          new Enemy(\n            id,\n            left * tileSize,\n            top * tileSize,\n            [this.frameSets[`${type}Left`], this.frameSets[`${type}Right`]],\n            sway\n          )\n        );\n      }\n    }\n  }\n\n  remove(enemy) {\n    this.items.splice(this.items.indexOf(enemy), 1);\n  }\n\n  update() {\n    for (let index = 0; index < this.items.length; index++) {\n      this.items[index].update();\n    }\n  }\n\n  updateAnimation() {\n    for (let index = 0; index < this.items.length; index++) {\n      this.items[index].updateAnimation();\n    }\n  }\n}\n\nclass Enemy extends Object {\n  constructor(id, x, y, frameSets, sway = 24) {\n    super(x, y - 4, 20, 20);\n\n    this.id = id;\n    this.sway = sway;\n    this.frameSets = frameSets;\n\n    this.baseX = x;\n    this.baseY = y;\n    this.direction = 1;\n\n    this.animator = new Animator(frameSets[1], 2);\n  }\n\n  update() {\n    this.x += 0.5 * this.direction;\n\n    if (this.x > this.baseX + this.sway) {\n      this.direction = -1;\n      this.animator.changeFrameSet(this.frameSets[0], 2);\n    } else if (this.x <= this.baseX - this.sway) {\n      this.direction = 1;\n      this.animator.changeFrameSet(this.frameSets[1], 2);\n    }\n  }\n\n  updateAnimation() {\n    this.animator.animate();\n  }\n}\n","import Object from \"./object\";\nimport Animator from \"./animator\";\n\nexport default class Fireballs {\n  constructor() {\n    this.items = [];\n    this.loaded = false;\n\n    this.frameSets = {};\n\n    const keys = [{ id: \"\", count: 5 }];\n\n    this.assetCount = 10;\n    this.loadCount = 0;\n    keys.forEach(({ count }) => {\n      for (let index = 1; index <= count; index++) {\n        const onImgLoad = () => {\n          this.loadCount += 1;\n\n          if (count === this.loadCount) {\n            this.loaded = true;\n          }\n        };\n        const imageLeft = new Image();\n        imageLeft.onload = onImgLoad;\n        imageLeft.src = `./assets/sprites/fireball/left/image ${index}.webp`;\n        const imageRight = new Image();\n        imageRight.onload = onImgLoad;\n        imageRight.src = `./assets/sprites/fireball/right/image ${index}.webp`;\n\n        const addImage = (k, image) => {\n          if (!this.frameSets[k]) {\n            this.frameSets[k] = [];\n          }\n          this.frameSets[k].push(image);\n        };\n\n        addImage(\"fireball-left\", imageLeft);\n        addImage(\"fireball-right\", imageRight);\n      }\n    });\n  }\n\n  update() {\n    for (let index = 0; index < this.items.length; index++) {\n      this.items[index].update();\n    }\n  }\n\n  updateAnimation() {\n    for (let index = 0; index < this.items.length; index++) {\n      this.items[index].updateAnimation();\n    }\n  }\n\n  add(id, x, y, direction) {\n    this.items.push(\n      new Fireball(\n        id,\n        x,\n        y,\n        direction,\n        this.frameSets[`fireball-${direction < 0 ? \"left\" : \"right\"}`]\n      )\n    );\n  }\n\n  remove(id) {\n    const index = this._findIndex(id);\n    if (index > -1) {\n      this.items.splice(index, 1);\n    }\n  }\n\n  reset() {\n    this.items = [];\n  }\n\n  _findIndex(id) {\n    for (let index = 0; index < this.items.length; index++) {\n      if (this.items[index].id === id) {\n        return index;\n      }\n    }\n    return -1;\n  }\n}\n\nclass Fireball extends Object {\n  constructor(id, x, y, direction, frameSet) {\n    super(x, y, 32, 16);\n\n    this.id = id;\n    this.direction = direction;\n\n    this.velocity = 5;\n\n    this.animator = new Animator(frameSet);\n  }\n\n  update() {\n    if (this.direction < 0) {\n      this.x -= this.velocity;\n    } else {\n      this.x += this.velocity;\n    }\n  }\n\n  updateAnimation() {\n    this.animator.animate();\n  }\n}\n","import World from \"./world\";\n\nexport default class Game {\n  constructor(gameOverCallback) {\n    this.world = new World();\n    this.over = false;\n\n    this.onGameOver = () => {\n      this.over = true;\n      gameOverCallback();\n    };\n  }\n\n  isLoaded() {\n    return this.world.isLoaded();\n  }\n\n  update() {\n    this.world.update(this.onGameOver);\n  }\n\n  setGameOver(val) {\n    this.over = val;\n  }\n}\n","export default class Object {\n  constructor(x, y, width, height) {\n    this.height = height;\n    this.width = width;\n    this.x = x;\n    this.xOld = x;\n    this.y = y;\n    this.yOld = y;\n  }\n\n  getBottom() {\n    return this.y + this.height;\n  }\n\n  getLeft() {\n    return this.x;\n  }\n\n  getRight() {\n    return this.x + this.width;\n  }\n\n  getTop() {\n    return this.y;\n  }\n\n  getOldBottom() {\n    return this.yOld + this.height;\n  }\n\n  getOldLeft() {\n    return this.xOld;\n  }\n\n  getOldRight() {\n    return this.xOld + this.width;\n  }\n\n  getOldTop() {\n    return this.yOld;\n  }\n\n  getCenterX() {\n    return this.x + this.width * 0.5;\n  }\n\n  getCenterY() {\n    return this.y + this.height * 0.5;\n  }\n\n  setBottom(y) {\n    this.y = y - this.height;\n  }\n\n  setLeft(x) {\n    this.x = x;\n  }\n\n  setRight(x) {\n    this.x = x - this.width;\n  }\n\n  setTop(y) {\n    this.y = y;\n  }\n\n  setOldBottom(y) {\n    this.yOld = y - this.height;\n  }\n\n  setOldLeft(x) {\n    this.xOld = x;\n  }\n\n  setOldRight(x) {\n    this.xOld = x - this.width;\n  }\n\n  setOldTop(y) {\n    this.yOld = y;\n  }\n\n  setCenterX(x) {\n    this.x = x - this.width * 0.5;\n  }\n\n  setCenterY(y) {\n    this.y = y - this.height * 0.5;\n  }\n}\n","import Object from \"./object\";\nimport Animator from \"./animator\";\nexport default class Player extends Object {\n  constructor() {\n    super(40, 100, 12, 12);\n    this.color = \"#ff0000\";\n    this.loaded = false;\n\n    this.running = false;\n    this.jumping = true;\n    this.firing = true;\n    this.velocityX = 0;\n    this.velocityY = 0;\n    this.direction = 1;\n\n    const keys = [\n      { id: \"Idle\", count: 10 },\n      { id: \"Run\", count: 8 },\n      { id: \"Jump\", count: 8 },\n      { id: \"Dead\", count: 8 },\n      { id: \"Fire\", count: 4 },\n    ];\n\n    this.frameSets = {};\n\n    this.loadCount = 0;\n    this.assetCount = 38 * 2;\n    keys.forEach(({ id, count }) => {\n      for (let index = 1; index <= count; index++) {\n        const onImgLoad = (e) => {\n          this.loadCount += 1;\n\n          if (this.assetCount === this.loadCount) {\n            this.loaded = true;\n          }\n        };\n\n        const imageLeft = new Image();\n        imageLeft.onload = onImgLoad;\n        const imageRight = new Image();\n        imageRight.onload = onImgLoad;\n        imageLeft.src = `./assets/sprites/player/left/${id} (${index}).webp`;\n        imageRight.src = `./assets/sprites/player/right/${id} (${index}).webp`;\n\n        const keyLeft = `${id.toLowerCase()}Left`;\n        const keyRight = `${id.toLowerCase()}Right`;\n\n        const addImage = (k, image) => {\n          if (!this.frameSets[k]) {\n            this.frameSets[k] = [];\n          }\n          this.frameSets[k].push(image);\n        };\n\n        addImage(keyLeft, imageLeft);\n        addImage(keyRight, imageRight);\n      }\n    });\n\n    this.animator = new Animator(this.frameSets[\"idleRight\"]);\n  }\n\n  reset() {\n    this.x = 40;\n    this.y = 100;\n    this.xOld = 40;\n    this.yOld = 100;\n    this.firing = false;\n    this.running = false;\n    this.jumping = false;\n    this.velocityX = 0;\n    this.velocityY = 0;\n    this.direction = 1;\n  }\n\n  jump() {\n    if (!this.jumping) {\n      this.jumping = true;\n      this.velocityY -= 18;\n    }\n  }\n\n  fire() {\n    if (!this.firing) {\n      this.firing = true;\n      setTimeout(() => {\n        this.firing = false;\n      }, 300);\n    }\n  }\n\n  moveLeft() {\n    this.direction = -1;\n    this.velocityX -= 0.5;\n  }\n  moveRight() {\n    this.direction = 1;\n    this.velocityX += 0.5;\n  }\n\n  updateAnimation({ dead = false }) {\n    if (dead) {\n      if (this.direction < 0) this.animator.changeFrameSet(this.frameSets[\"deadLeft\"], 2);\n      else this.animator.changeFrameSet(this.frameSets[\"deadRight\"], 2);\n\n      this.animator.animate(dead);\n      return;\n    }\n\n    if (this.velocityY < 0) {\n      if (this.direction < 0) {\n        this.animator.changeFrameSet(this.frameSets[\"jumpLeft\"], 2);\n      } else {\n        this.animator.changeFrameSet(this.frameSets[\"jumpRight\"], 2);\n      }\n    } else if (this.direction < 0) {\n      if (this.velocityX < -0.1) {\n        this.animator.changeFrameSet(this.frameSets[\"runLeft\"]);\n      } else {\n        if (this.firing) {\n          this.animator.changeFrameSet(this.frameSets[\"fireLeft\"], 2);\n        } else {\n          this.animator.changeFrameSet(this.frameSets[\"idleLeft\"]);\n        }\n      }\n    } else if (this.direction > 0) {\n      if (this.velocityX > 0.1) {\n        this.animator.changeFrameSet(this.frameSets[\"runRight\"]);\n      } else {\n        if (this.firing) {\n          this.animator.changeFrameSet(this.frameSets[\"fireRight\"], 2);\n        } else {\n          this.animator.changeFrameSet(this.frameSets[\"idleRight\"]);\n        }\n      }\n    }\n\n    this.animator.animate();\n  }\n\n  update(gravity, friction) {\n    this.xOld = this.x;\n    this.yOld = this.y;\n    this.velocityY += gravity;\n    this.x += this.velocityX;\n    this.y += this.velocityY;\n\n    this.velocityX *= friction;\n    this.velocityY *= friction;\n\n    const absVelocityX = Math.abs(this.velocityX);\n    this.running = absVelocityX === 0.435 ? false : absVelocityX >= 0.2;\n  }\n}\n","import Object from \"./object\";\n\nexport default class Portal extends Object {\n  constructor({\n    x,\n    y,\n    width,\n    height,\n    direction,\n    destinationX,\n    destinationY,\n    destinationArea,\n  }) {\n    super(x, y, width, height);\n\n    this.direction = direction;\n    this.destinationX = destinationX;\n    this.destinationY = destinationY;\n    this.destinationArea = destinationArea;\n  }\n}\n","import Object from \"./object\";\nimport Animator from \"./animator\";\n\nexport default class Water {\n  constructor(waterObjects = [], tileSize) {\n    this.items = [];\n    this.loaded = false;\n\n    const keys = [{ id: \"\", count: 17 }];\n\n    this.frameSets = {};\n\n    this.assetCount = 17;\n    this.loadCount = 0;\n    keys.forEach(({ count }) => {\n      for (let index = 1; index <= count; index++) {\n        const image = new Image();\n        image.onload = () => {\n          this.loadCount += 1;\n\n          if (count === this.loadCount) {\n            this.loaded = true;\n          }\n        };\n        image.src = `./assets/sprites/water/image ${index}.webp`;\n\n        const addImage = (k, image) => {\n          if (!this.frameSets[k]) {\n            this.frameSets[k] = [];\n          }\n          this.frameSets[k].push(image);\n        };\n\n        addImage(\"water\", image);\n      }\n    });\n\n    for (let index = 0; index < waterObjects.length; index++) {\n      const { left, top } = waterObjects[index];\n\n      this.items.push(\n        new WaterObject(left * tileSize, top * tileSize, this.frameSets[\"water\"], tileSize)\n      );\n    }\n  }\n\n  update() {\n    for (let index = 0; index < this.items.length; index++) {\n      this.items[index].updateAnimation();\n    }\n  }\n}\n\nclass WaterObject extends Object {\n  constructor(x, y, frameSet, tileSize) {\n    super(x, y, tileSize, tileSize);\n\n    this.animator = new Animator(frameSet, 3);\n  }\n\n  updateAnimation() {\n    this.animator.animate();\n  }\n}\n","import Coins from \"./coins\";\nimport Water from \"./water\";\nimport Player from \"./player\";\nimport Object from \"./object\";\nimport Portal from \"./portal\";\nimport Enemies from \"./enemies\";\nimport Collider from \"./collider\";\nimport Fireballs from \"./fireballs\";\nimport AudioController from \"../controller/audio\";\n\nexport default class World {\n  constructor(friction = 0.87, gravity = 2) {\n    this.friction = friction;\n    this.gravity = gravity;\n\n    this.rows = 12;\n    this.columns = 16;\n    this.tileSize = 16;\n\n    this.loaded = true;\n\n    this.coins = [];\n    this.totalCoins = 0;\n    this.killedEnemies = \"\";\n    this.collectedCoins = \"\";\n    this.height = this.tileSize * this.rows;\n    this.width = this.tileSize * this.columns;\n\n    this.player = new Player();\n    this.collider = new Collider();\n    this.fireballs = new Fireballs();\n\n    this.audioController = new AudioController();\n  }\n\n  setup(data) {\n    if (this.theme !== data.theme) {\n      if (data.theme) {\n        this.playedThemeMusic = false;\n        this.audioController.load(\n          [\n            { file: \"fire\", ext: \"wav\" },\n            { file: \"coin\", ext: \"wav\" },\n            { file: \"foot\", ext: \"wav\" },\n            { file: \"jump\", ext: \"wav\" },\n            { file: \"hurt\", ext: \"wav\" },\n            { file: \"fall\", ext: \"mp3\" },\n            { file: data.theme, ext: \"mp3\" },\n          ],\n          (val) => {\n            this.loaded = val;\n          }\n        );\n\n        this.stopThemeMusic();\n        this.theme = data.theme;\n      }\n    }\n\n    this.id = data.id;\n    this.totalCoins = 0;\n    this.map = data.areaMap;\n    this.isPlayerDead = false;\n    this.objects = data.objectsMap;\n    this.collisonMap = data.collisonMap;\n\n    if (data.rows) {\n      this.rows = data.rows;\n      this.height = this.tileSize * this.rows;\n    }\n    if (data.columns) {\n      this.columns = data.columns;\n      this.width = this.tileSize * this.columns;\n    }\n\n    this.deathAreas = data.death.map(({ x, y, height, width }) => new Object(x, y, width, height));\n\n    this.enemies = new Enemies(data.enemies, this.tileSize, this.killedEnemies);\n\n    this.coins = new Coins(data.coins, this.tileSize, this.collectedCoins);\n\n    this.portals = data.portals.map((p) => new Portal(p));\n\n    this.water = new Water(data.water, this.tileSize);\n\n    this.fireballs.reset();\n\n    if (this.portal) {\n      this.player.setCenterX(this.portal.destinationX);\n      this.player.setCenterY(this.portal.destinationY);\n      this.player.direction = this.portal.direction;\n\n      this.portal = null;\n    }\n  }\n\n  playJumpSound() {\n    AudioController.play(\"jump\", \"wav\");\n  }\n\n  playFireSound() {\n    AudioController.play(\"fire\", \"wav\");\n  }\n\n  playThemeMusic() {\n    if (!this.theme) return;\n\n    this.audioController.play(this.theme, \"mp3\");\n    this.audioController.volume(this.theme, 4);\n    this.audioController.loop(this.theme);\n  }\n\n  stopThemeMusic() {\n    if (!this.theme) return;\n\n    this.audioController.stop(this.theme);\n  }\n\n  pauseThemeMusic() {\n    if (!this.theme) return;\n\n    this.audioController.pause(this.theme);\n  }\n\n  collideObject(object) {\n    if (object.getLeft() < 0 - this.player.width / 2) {\n      object.setLeft(-this.player.width / 2);\n      object.velocityX = 0;\n    } else if (object.getRight() > this.width + this.player.width / 2) {\n      object.setRight(this.width + this.player.width / 2);\n      object.velocityX = 0;\n    }\n    if (object.getTop() < 0 - this.player.height * 2.5) {\n      object.setTop(0 - this.player.height * 2.5);\n      object.velocityY = 0;\n    } else if (object.getBottom() - 1 > this.height) {\n      object.setBottom(this.height);\n      object.velocityY = 0;\n      object.jumping = false;\n    }\n\n    let bottom, left, right, top;\n\n    const setTop = () => {\n      top = this._normalizeIndex(Math.floor(object.getTop() / this.tileSize), this.rows);\n    };\n\n    const setBottom = () => {\n      bottom = this._normalizeIndex(Math.floor(object.getBottom() / this.tileSize), this.rows);\n    };\n\n    const setLeft = () => {\n      left = Math.floor(object.getLeft() / this.tileSize);\n    };\n\n    const setRight = () => {\n      right = Math.floor(object.getRight() / this.tileSize);\n    };\n\n    setTop();\n    setLeft();\n    this.collider.collide(\n      this.collisonMap[top][left],\n      object,\n      left * this.tileSize,\n      top * this.tileSize,\n      this.tileSize\n    );\n\n    setTop();\n    setRight();\n    this.collider.collide(\n      this.collisonMap[top][right],\n      object,\n      right * this.tileSize,\n      top * this.tileSize,\n      this.tileSize\n    );\n\n    setBottom();\n    setLeft();\n    this.collider.collide(\n      this.collisonMap[bottom][left],\n      object,\n      left * this.tileSize,\n      bottom * this.tileSize,\n      this.tileSize\n    );\n\n    setBottom();\n    setRight();\n    this.collider.collide(\n      this.collisonMap[bottom][right],\n      object,\n      right * this.tileSize,\n      bottom * this.tileSize,\n      this.tileSize\n    );\n  }\n\n  _normalizeIndex(index, maxIndex) {\n    if (index >= maxIndex - 1) {\n      return maxIndex - 1;\n    } else if (index < 0) {\n      return 0;\n    }\n\n    return index;\n  }\n\n  checkCollision(object1, object2, offsetX = 0, offsetY = 0) {\n    if (\n      object1.x < object2.x + object2.width + offsetX &&\n      object1.x + object1.width > object2.x - offsetX &&\n      object1.y < object2.y + object2.height + offsetY &&\n      object1.y + object1.height > object2.y - offsetY\n    ) {\n      return true;\n    }\n    return false;\n  }\n\n  get assetCount() {\n    return this.player.assetCount + this.coins.assetCount + this.water.assetCount;\n  }\n\n  get loadCount() {\n    return this.player.loadCount + this.coins.loadCount + this.water.loadCount;\n  }\n\n  isLoaded() {\n    return this.loaded && this.isAssetsLoaded();\n  }\n\n  isAssetsLoaded() {\n    return this.player.loaded && this.coins.loaded && this.water.loaded;\n  }\n\n  onPlayerDead(onGameOver, audio = \"fall\") {\n    if (!this.isPlayerDead) {\n      AudioController.play(audio, \"mp3\");\n\n      this.player.velocityX = 0;\n      this.stopThemeMusic();\n      onGameOver();\n    }\n    this.isPlayerDead = true;\n    this.collectedCoins = \"\";\n    this.killedEnemies = \"\";\n    this.theme = null;\n  }\n\n  update(onGameOver) {\n    AudioController.animate(() => {\n      AudioController.play(\"foot\", \"wav\", 0.15);\n    }, this.player.running);\n\n    if (!this.playedThemeMusic) {\n      if (this.isLoaded()) {\n        this.playThemeMusic();\n        this.playedThemeMusic = true;\n      }\n    }\n\n    this.player.update(this.gravity, this.friction);\n\n    this.collideObject(this.player);\n\n    // coins\n    for (let index = 0; index < this.coins.items.length; index++) {\n      const coin = this.coins.items[index];\n\n      coin.update();\n      coin.updateAnimation();\n\n      if (this.checkCollision(this.player, coin, 5, 5)) {\n        this.coins.remove(coin);\n\n        this.collectedCoins += `${coin.id},`;\n\n        AudioController.play(\"coin\");\n        this.totalCoins += 1;\n      }\n    }\n\n    // fireballs\n    for (let index = 0; index < this.fireballs.items.length; index++) {\n      const fireball = this.fireballs.items[index];\n\n      fireball.update();\n      fireball.updateAnimation(this.player);\n\n      for (let j = 0; j < this.enemies.items.length; j++) {\n        const enemy = this.enemies.items[j];\n\n        if (this.checkCollision(enemy, fireball)) {\n          this.enemies.remove(enemy);\n\n          this.killedEnemies += `${enemy.id},`;\n\n          AudioController.play(\"hurt\");\n        }\n      }\n\n      if (fireball.x >= this.width + 50) {\n        this.fireballs.remove(fireball.id);\n      }\n    }\n\n    let dead = false;\n    if (!dead) {\n      for (let index = 0; index < this.deathAreas.length; index++) {\n        if (this.checkCollision(this.player, this.deathAreas[index])) {\n          this.onPlayerDead(onGameOver);\n          dead = true;\n          break;\n        }\n      }\n    }\n\n    if (!dead) {\n      for (let index = 0; index < this.enemies.items.length; index++) {\n        const enemy = this.enemies.items[index];\n\n        if (this.checkCollision(this.player, enemy)) {\n          this.onPlayerDead(onGameOver);\n          dead = true;\n          break;\n        }\n\n        enemy.update();\n        enemy.updateAnimation();\n      }\n    }\n\n    if (!this.portal) {\n      for (let index = 0; index < this.portals.length; index++) {\n        if (this.checkCollision(this.player, this.portals[index])) {\n          this.portal = this.portals[index];\n          break;\n        }\n      }\n    }\n\n    this.player.updateAnimation({ dead });\n\n    this.water.update();\n  }\n}\n","import Game from \"./game\";\nimport Screen from \"./screen\";\nimport GameEngine from \"./engine\";\nimport Controller from \"./controller\";\nimport MouseInput from \"./controller/mouse-input\";\n\nimport { uid, preLoadAndFetch } from \"./util\";\n\npreLoadAndFetch();\n\nimport areas from \"./areas\";\n\nconst isTouchesEnabled = \"ontouchstart\" in document.documentElement;\n\nconst startBtn = document.getElementById(\"startBtn\");\nconst startTitle = document.getElementById(\"startTitle\");\nconst startScreen = document.getElementById(\"startScreen\");\nconst controllers = document.querySelectorAll(\".controller\");\nconst loadingScreen = document.getElementById(\"loadingScreen\");\nconst progressValue = document.getElementById(\"progressValue\");\n\nconst toggleControllers = (value) => {\n  controllers.forEach(\n    (controller) => (controller.style.visibility = isTouchesEnabled && value ? \"visible\" : \"hidden\")\n  );\n};\n\nconst toggleStartScreen = (value) => {\n  startScreen.style.visibility = !value ? \"hidden\" : \"visible\";\n};\n\nconst toggleLoadingScreen = (value) => {\n  loadingScreen.style.visibility = !value ? \"hidden\" : \"visible\";\n};\n\nconst setProgressValue = (value) => {\n  progressValue.style.width = `${value}%`;\n};\n\nsetProgressValue(50);\n\nwindow.addEventListener(\"load\", function () {\n  \"use strict\";\n\n  let areaId = 1;\n  let loaded = false;\n  let firing = false;\n  let areaNumber = 1;\n  let worldChanged = false;\n  const totalAreaNumber = 3;\n\n  setProgressValue(100);\n  toggleLoadingScreen(false);\n  setProgressValue(0);\n\n  const controller = new Controller();\n\n  // GAME\n  const game = new Game(() => {\n    startTitle.textContent = \"Game Over\";\n    setTimeout(() => {\n      toggleStartScreen(true);\n    }, 1500);\n  });\n\n  const setupWorld = () => {\n    game.world.setup(areas[areaId]);\n  };\n\n  // SCREEN\n  let screen;\n\n  const setupScreen = () => {\n    screen = new Screen(document.querySelector(\"canvas\"), areas[areaId].world);\n\n    screen.buffer.canvas.height = game.world.height;\n    screen.buffer.canvas.width = game.world.width;\n  };\n\n  setupScreen();\n\n  // GAME ENGINE\n\n  const loadPercent = () => {\n    const totalAssets = (worldChanged ? 0 : game.world.assetCount) + screen.assetCount;\n    const totalLoaded = (worldChanged ? 0 : game.world.loadCount) + screen.loadCount;\n\n    return Math.round((totalLoaded / totalAssets) * 100);\n  };\n\n  const isLoaded = () => {\n    return game.isLoaded() && screen.isLoaded();\n  };\n\n  const update = () => {\n    loaded = isLoaded();\n    const loadValue = loadPercent();\n\n    if (loadValue < 100) {\n      setProgressValue(loadValue == 99 ? 100 : loadValue);\n    }\n\n    if (!loaded) {\n      toggleControllers(false);\n      toggleLoadingScreen(true);\n    } else {\n      toggleLoadingScreen(false);\n      toggleControllers(true);\n      setProgressValue(0);\n    }\n\n    if (!game.over && loaded) {\n      const { player } = game.world;\n\n      if (controller.left.active) {\n        player.moveLeft();\n      }\n      if (controller.right.active) {\n        player.moveRight();\n      }\n      if (controller.up.active) {\n        if (!player.jumping) {\n          game.world.playJumpSound();\n        }\n        player.jump();\n        controller.up.active = false;\n      }\n      if (controller.fire.active && !player.firing) {\n        const { fireballs } = game.world;\n        const offsetX = player.direction < 0 ? -32 : 8;\n\n        player.fire();\n        game.world.playFireSound();\n        fireballs.add(uid(), player.x + offsetX, player.y - 16, player.direction);\n        controller.fire.active = false;\n      }\n    }\n\n    if (game.world.portal) {\n      worldChanged = true;\n      engine.hold();\n\n      const { direction, destinationArea } = game.world.portal;\n      if (destinationArea !== areaId) {\n        if (direction < 0) {\n          areaNumber--;\n        } else {\n          areaNumber++;\n        }\n\n        if (areaNumber === 0) {\n          areaNumber = 1;\n        }\n\n        if (areaNumber > totalAreaNumber) {\n          areaNumber = totalAreaNumber;\n        }\n      }\n\n      areaId = destinationArea;\n\n      setupWorld();\n      setupScreen();\n\n      engine.resume();\n    }\n\n    game.update();\n  };\n\n  const render = () => {\n    screen.drawBackground();\n    screen.drawMap(game.world.map);\n    screen.drawMapObjects(game.world.objects);\n    // screen.drawArea(game.world.portals);\n    // screen.drawArea(game.world.enemies.items);\n\n    // draw coins\n    if (game.world.coins) {\n      for (let index = 0; index < game.world.coins.items.length; index++) {\n        const coin = game.world.coins.items[index];\n\n        screen.drawObject(\n          coin.animator.frameValue,\n          coin.x,\n          coin.y,\n          coin.width,\n          coin.height,\n          coin.offsetX,\n          coin.offsetY\n        );\n        // screen.drawText(coin.id, coin.x, coin.y);\n        // screen.drawRect(coin);\n      }\n    }\n\n    // draw water animations\n    if (game.world.water) {\n      for (let index = 0; index < game.world.water.items.length; index++) {\n        const waterItem = game.world.water.items[index];\n\n        screen.drawObject(\n          waterItem.animator.frameValue,\n          waterItem.x,\n          waterItem.y,\n          waterItem.width,\n          waterItem.height,\n          waterItem.offsetX,\n          waterItem.offsetY\n        );\n      }\n    }\n\n    // draw fireballs\n    if (game.world.fireballs) {\n      for (let index = 0; index < game.world.fireballs.items.length; index++) {\n        const fireball = game.world.fireballs.items[index];\n\n        screen.drawObject(\n          fireball.animator.frameValue,\n          fireball.x,\n          fireball.y,\n          fireball.width,\n          fireball.height\n        );\n      }\n    }\n\n    if (game.world.enemies) {\n      for (let index = 0; index < game.world.enemies.items.length; index++) {\n        const enemy = game.world.enemies.items[index];\n\n        screen.drawObject(\n          enemy.animator.frameValue,\n          enemy.x,\n          enemy.y,\n          enemy.width,\n          enemy.height,\n          0,\n          1\n        );\n      }\n    }\n\n    // draw player\n    const xOffset = game.world.player.direction < 0 ? -36 : -12;\n\n    screen.drawPlayer(\n      game.world.player.animator.frameValue,\n      game.world.player.getLeft(),\n      game.world.player.getTop(),\n      60,\n      40,\n      xOffset,\n      -24\n    );\n\n    // draw coin count\n    const scoreTextOffest =\n      game.world.totalCoins >= 10 && game.world.totalCoins <= 99\n        ? 3\n        : game.world.totalCoins > 99\n        ? 3.4\n        : 2.7;\n    const image = new Image();\n    image.src = \"./assets/sprites/coin/image 1.webp\";\n    screen.drawObject(image, (game.world.columns - 1.3) * 16, 8, 10, 10);\n    screen.drawText(\"x\", (game.world.columns - 2) * 16, 15);\n    screen.drawText(game.world.totalCoins, (game.world.columns - scoreTextOffest) * 16, 16.1);\n\n    screen.drawText(areaNumber, 48, 15.3);\n    screen.drawText(\"Area\", 12, 15.3);\n    screen.drawText(\"x\", 38, 15);\n\n    screen.render();\n  };\n\n  const resize = () => {\n    let width = document.documentElement.clientWidth;\n    let height = document.documentElement.clientHeight;\n\n    if (width < 600) {\n      [width, height] = [height, width];\n    }\n\n    screen.resize(width - 4, height - 4, game.world.height / game.world.width);\n    screen.render();\n    toggleControllers(true);\n  };\n\n  resize();\n\n  var engine = new GameEngine(1000 / 30, update, render);\n\n  // EVENTS HANDLER\n  const keyDownUp = ({ type, keyCode }) => {\n    controller.keyDownUp(type, keyCode);\n  };\n\n  window.addEventListener(\"keydown\", keyDownUp);\n  window.addEventListener(\"keyup\", keyDownUp);\n  window.addEventListener(\"resize\", resize);\n\n  const leftMouse = new MouseInput(\"leftBtn\", (e) => {\n    clearMouse();\n    controller.keyDownUp(e, 37);\n  });\n  const rightMouse = new MouseInput(\"rightBtn\", (e) => {\n    clearMouse();\n    controller.keyDownUp(e, 39);\n  });\n  const upMouse = new MouseInput(\"jumpBtn\", (e) => {\n    clearMouse();\n    controller.keyDownUp(e, 32);\n  });\n\n  const fireMouse = new MouseInput(\"fireBtn\", (e) => {\n    clearMouse();\n    controller.keyDownUp(e, 13);\n  });\n\n  const clearMouse = () => {\n    upMouse.actions.clear();\n    fireMouse.actions.clear();\n    leftMouse.actions.clear();\n    rightMouse.actions.clear();\n  };\n\n  startBtn.onclick = () => {\n    clearMouse();\n    startTitle.textContent = \"\";\n    toggleStartScreen(false);\n\n    game.world.player.reset();\n    game.over = false;\n\n    engine.hold();\n\n    areaId = 1;\n\n    setupWorld();\n    setupScreen();\n\n    resize();\n\n    engine.resume();\n\n    if (!engine.started) {\n      engine.start();\n    }\n  };\n\n  document.addEventListener(\"visibilitychange\", function () {\n    if (document.visibilityState === \"visible\") {\n      game.world.playThemeMusic();\n    } else {\n      game.world.pauseThemeMusic();\n    }\n  });\n\n  // startBtn.click();\n});\n","import TileSet from \"./tileset\";\n\nexport default class Screen {\n  constructor(canvas, world) {\n    this.buffer = document.createElement(\"canvas\").getContext(\"2d\");\n    this.context = canvas.getContext(\"2d\");\n\n    this.tileSet = new TileSet(16, 8, world);\n  }\n\n  drawMap(map) {\n    const { images, tileSize } = this.tileSet;\n\n    const drawTile = (x, y, value) => {\n      const image = images[value];\n\n      let destinationX = x * tileSize;\n      let destinationY = y * tileSize;\n\n      this.buffer.drawImage(image, destinationX, destinationY, tileSize, tileSize);\n    };\n\n    for (let i = 0; i < map.length; i++) {\n      const row = map[i];\n      for (let j = 0; j < row.length; j++) {\n        const value = row[j];\n\n        if (value) {\n          if (Array.isArray(value)) {\n            for (let index = 0; index < value.length; index++) {\n              drawTile(j, i, value[index]);\n            }\n          } else {\n            drawTile(j, i, value);\n          }\n        }\n      }\n    }\n  }\n\n  drawArea(object) {\n    for (let index = 0; index < object.length; index++) {\n      const { x, y, width, height } = object[index];\n      this.buffer.fillRect(x, y, width, height);\n    }\n  }\n\n  drawMapObjects(objects) {\n    const { objectImages, tileSize } = this.tileSet;\n\n    for (let i = 0; i < objects.length; i++) {\n      const row = objects[i];\n      for (let j = 0; j < row.length; j++) {\n        const value = row[j];\n\n        if (value) {\n          value.forEach((element) => {\n            const { id, xOffset = 0, yOffset = 0, width = 16, height = 16 } = element;\n            const image = objectImages[id];\n\n            let destinationX = j * tileSize;\n            let destinationY = i * tileSize;\n\n            this.buffer.drawImage(\n              image,\n              destinationX + xOffset,\n              destinationY + yOffset,\n              width,\n              height\n            );\n          });\n        }\n      }\n    }\n  }\n\n  drawBackground() {\n    this.buffer.drawImage(\n      this.tileSet.tileBackground,\n      0,\n      0,\n      this.buffer.canvas.width,\n      this.buffer.canvas.height\n    );\n  }\n\n  drawText(text, x, y, color = \"black\") {\n    this.buffer.fillStyle = color;\n    this.buffer.font = \"10px Arial\";\n    this.buffer.fillText(text, x, y);\n  }\n\n  drawPlayer(image, destinationX, destinationY, width, height, offsetX, offsetY, rect) {\n    this.drawObject(image, destinationX + offsetX, destinationY + offsetY + 1, width, height);\n  }\n\n  drawObject(image, destinationX, destinationY, width, height, offsetX = 0, offsetY = 0) {\n    this.buffer.drawImage(image, destinationX + offsetX, destinationY + offsetY, width, height);\n  }\n\n  drawRect({ x, y, width, height }) {\n    this.buffer.fillRect(x, y, width, height);\n  }\n\n  get assetCount() {\n    return this.tileSet.assetCount;\n  }\n\n  get loadCount() {\n    return this.tileSet.loadCount;\n  }\n\n  isLoaded() {\n    return this.tileSet.loaded;\n  }\n\n  resize(width, height, ratio) {\n    if (height / width > ratio) {\n      this.context.canvas.height = width * ratio;\n      this.context.canvas.width = width;\n    } else {\n      this.context.canvas.height = height;\n      this.context.canvas.width = height / ratio;\n    }\n\n    this.context.webkitImageSmoothingEnabled = false;\n    this.context.mozImageSmoothingEnabled = false;\n    this.context.imageSmoothingEnabled = false;\n  }\n\n  render() {\n    this.context.drawImage(\n      this.buffer.canvas,\n      0,\n      0,\n      this.buffer.canvas.width,\n      this.buffer.canvas.height,\n      0,\n      0,\n      this.context.canvas.width,\n      this.context.canvas.height\n    );\n  }\n}\n","export default class TileSet {\n  constructor(tileSize, columns, world = 1) {\n    const worldKey = `world-${world}`;\n    this.loaded = false;\n    this.columns = columns;\n    this.tileSize = tileSize;\n\n    this.images = [];\n    this.images.push(null);\n\n    this.objectImages = [];\n    this.objectImages.push(null);\n\n    this.tileBackground = new Image();\n\n    const meta = {\n      1: { objectLen: 11, tileLen: 18 },\n      2: { objectLen: 10, tileLen: 18 },\n      3: { objectLen: 15, tileLen: 16 },\n      4: { objectLen: 14, tileLen: 16 },\n      5: { objectLen: 12, tileLen: 25 },\n    };\n\n    this.loadCount = 0;\n    this.assetCount = meta[world].objectLen + meta[world].tileLen + 1;\n    const onImgLoad = (e) => {\n      this.loadCount += 1;\n\n      if (this.assetCount === this.loadCount) {\n        this.loaded = true;\n      }\n    };\n\n    for (let index = 1; index <= meta[world].objectLen; index++) {\n      const image = new Image();\n      image.onload = onImgLoad;\n      image.src = `./assets/sprites/${worldKey}/objects/${index}.png`;\n\n      this.objectImages.push(image);\n    }\n\n    for (let index = 1; index <= meta[world].tileLen; index++) {\n      const image = new Image();\n      image.onload = onImgLoad;\n      image.src = `./assets/sprites/${worldKey}/tiles/${index}.png`;\n\n      this.images.push(image);\n    }\n\n    this.tileBackground.src = `./assets/sprites/${worldKey}/bg.png`;\n    this.tileBackground.onload = onImgLoad;\n  }\n}\n","export const uid = () => {\n  return Date.now().toString(36) + Math.random().toString(36).substring(2);\n};\n\nexport const preLoadAndFetch = () => {\n  const items = {\n    sprites: [\n      { rel: \"prefetch\", key: \"world-1\", objects: 11, tiles: 18 },\n      { rel: \"prefetch\", key: \"world-2\", objects: 10, tiles: 18 },\n      { rel: \"prefetch\", key: \"world-3\", objects: 15, tiles: 16 },\n      { rel: \"prefetch\", key: \"world-4\", objects: 14, tiles: 16 },\n      { rel: \"prefetch\", key: \"world-5\", objects: 12, tiles: 25 },\n    ],\n    player: [\n      { rel: \"prefetch\", key: \"Dead\", objects: 8 },\n      { rel: \"prefetch\", key: \"Idle\", objects: 10 },\n      { rel: \"prefetch\", key: \"Jump\", objects: 8 },\n      { rel: \"prefetch\", key: \"Run\", objects: 8 },\n    ],\n    water: [{ rel: \"prefetch\", objects: 17 }],\n    coin: [{ rel: \"prefetch\", objects: 16 }],\n  };\n\n  const body = document.getElementsByTagName(\"head\")[0];\n\n  const append = (href, rel, as = \"image\") => {\n    const item = document.createElement(\"link\");\n\n    item.as = as;\n    item.rel = rel;\n    item.href = href;\n    body.prepend(item);\n  };\n\n  items.sprites.forEach(({ rel, key, objects, tiles }) => {\n    for (let index = 1; index <= objects; index++) {\n      append(`./assets/sprites/${key}/objects/${index}.png`, rel);\n    }\n    for (let index = 1; index <= tiles; index++) {\n      append(`./assets/sprites/${key}/tiles/${index}.png`, rel);\n    }\n\n    append(`./assets/sprites/${key}/bg.png`, rel);\n  });\n\n  items.player.forEach(({ rel, key, objects }) => {\n    for (let index = 1; index <= objects; index++) {\n      append(`./assets/sprites/player/left/${key} (${index}).webp`, rel);\n      append(`./assets/sprites/player/right/${key} (${index}).webp`, rel);\n    }\n  });\n\n  items.water.forEach(({ rel, objects }) => {\n    for (let index = 1; index <= objects; index++) {\n      append(`./assets/sprites/water/image ${index}.webp`, rel);\n    }\n  });\n\n  items.coin.forEach(({ rel, objects }) => {\n    for (let index = 1; index <= objects; index++) {\n      append(`./assets/sprites/coin/image ${index}.webp`, rel);\n    }\n  });\n\n  const audioFiles = [\n    { rel: \"preload\", file: \"grasslands\" },\n    { rel: \"preload\", file: \"coin\", ext: \"wav\" },\n    { rel: \"preload\", file: \"jump\", ext: \"wav\" },\n    { rel: \"preload\", file: \"fall\", ext: \"mp3\" },\n    { rel: \"preload\", file: \"iceland\" },\n    { rel: \"preload\", file: \"desert\" },\n    { rel: \"preload\", file: \"dungeon\" },\n  ];\n\n  audioFiles.forEach(({ rel, file, ext = \"mp3\" }) => {\n    if (rel === \"preload\") {\n      const audio = new Audio();\n      audio.url = `./assets/audio/${file}.${ext}`;\n    } else {\n      append(`./assets/audio/${file}.${ext}`, rel, \"audio\");\n    }\n  });\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module\n__webpack_require__(\"./app/index.js\");\n// This entry module used 'exports' so it can't be inlined\n"],"sourceRoot":""}